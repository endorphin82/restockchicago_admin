(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{203:function(e,t,n){e.exports=n(393)},212:function(e,t,n){},390:function(e,t,n){},393:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(7),l=n.n(i),o=n(31),c=n(396),d=n(30),u=(n(212),n(399)),s=n(198),m=n(37),g=n(402),p=n(19),y=n(22),E=n(27),f=n(400),v=n(398),h=n(401),O=n(93),b=n(82),C=n.n(b),I=n(92),A=n.n(I),P=String("recyclebin"),S=String("https://endorphin82.github.io/restockchicago-img/img/no-image/no-image-available.svg"),_=function(e){return{type:"IS_OPEN_ADD_PRODUCT_MODAL",payload:e}},j=function(e){return{type:"IS_OPEN_ADD_CATEGORY_MODAL",payload:e}};var D=n(29),k=n(24),R=n.n(k),$=n(21);function w(){var e=Object(D.a)(["\n    mutation AddProduct($name: String!, $price: Float!, $categories: [String], $images: [String], $icon: String) {\n  addProduct(name: $name, price: $price, categories: $categories, images: $images, icon: $icon) {\n    id\n    name\n    price\n    images\n    icon\n    categories\n  }\n}\n    "]);return w=function(){return e},e}var T=R()(w());function x(){var e=Object(D.a)(["\n    query ProductsAll {\n  productsAll {\n    id\n    name\n    price\n    images\n    icon\n    categories\n  }\n}\n    "]);return x=function(){return e},e}var q=R()(x());function M(e){return $.c(q,e)}function B(){var e=Object(D.a)(["\n    query CategoriesAll {\n  categoriesAll {\n    id\n    name\n    icons\n    images\n    parent\n  }\n}\n    "]);return B=function(){return e},e}var N=R()(B());function L(e){return $.c(N,e)}var F={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},U={wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:4}}},W=Object(o.b)((function(e){return{isOpenAddProductModal:e.add_product_modal.isOpen}}),{setIsOpenAddProductModal:_})((function(e){var t,n=e.isOpenAddProductModal,i=e.setIsOpenAddProductModal,l=(t={update:function(e,t){var n=t.data.addProduct,a=e.readQuery({query:q}).productsAll.productsAll;e.writeQuery({query:q,data:{productsAll:null===a||void 0===a?void 0:a.concat([n])}})},refetchQueries:[{query:q}]},$.b(T,t)),o=Object(E.a)(l,2),c=o[0],d=(o[1].data,L()),u=d.loading,s=d.error,g=d.data,b=Object(a.useState)({}),I=Object(E.a)(b,2),_=I[0],j=I[1];console.log("values+++",_);var D=function(e){var t=e.target,n=t.name,a=t.value;console.log("target",e.target),j(Object(y.a)({},_,Object(p.a)({},n,a)))};if(u)return r.a.createElement("div",null,"Loading...");if(s||!g)return r.a.createElement("div",null,"Error...");var k=g.categoriesAll,R=null===k||void 0===k?void 0:k.filter((function(e){return(null===e||void 0===e?void 0:e.id)!==P}));return console.log("isOpenAddProductModal",n),r.a.createElement(f.a,{title:"Product information",visible:Boolean(n),footer:!1,onCancel:function(){i(!1)}},r.a.createElement(v.a,Object.assign({name:"product"},U,{onFinish:function(e){console.log("Received values of form:",_);var t,n=_.name,a=(_.categories,_.icon),r=(t=_.price,Math.round(100*parseFloat(t.replace(/[$,]/g,""))));console.log("onFinish"),c({variables:{name:n,price:r,categories:e.categories,images:e.images?e.images:[S],icon:a}}).then((function(e){return console.log("addProduct:",e)})).catch((function(e){return console.log("addProductERROR:",e)})),i(!1)}}),r.a.createElement(v.a.Item,{label:"Name product",rules:[{required:!0,message:"Name product is required"}]},r.a.createElement(h.a,{name:"name",onChange:D,placeholder:"name product",style:{width:"100%",marginRight:8}})),r.a.createElement(v.a.Item,{label:"Price",rules:[{required:!0,message:"Price is required"}]},r.a.createElement(h.a,{name:"price",onChange:D,type:"number",placeholder:"Price $",style:{width:"100%",marginRight:8}})),r.a.createElement(v.a.Item,{label:"Category",name:"categories",rules:[{required:!0,message:"Category is required"}]},r.a.createElement(O.a,{onChange:function(e){j(Object(y.a)({},_,{categoryId:e}))},mode:"multiple",placeholder:"Select category"},null===R||void 0===R?void 0:R.map((function(e){return r.a.createElement(O.a.Option,{key:String(null===e||void 0===e?void 0:e.id),value:String(null===e||void 0===e?void 0:e.id),onChange:D},String(null===e||void 0===e?void 0:e.id))})))),r.a.createElement(v.a.List,{name:"images"},(function(e,t){var n=t.add,a=t.remove;return r.a.createElement("div",null,e.map((function(t,n){return r.a.createElement(v.a.Item,Object.assign({},0===n?F:U,{label:0===n?"Images":"",required:!1,key:t.key}),r.a.createElement(v.a.Item,Object.assign({},t,{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input image url or delete this field."}],noStyle:!0}),r.a.createElement(h.a,{style:{width:"90%",marginRight:8}})),e.length>=1?r.a.createElement(A.a,{className:"dynamic-delete-button",onClick:function(){a(t.name)}}):r.a.createElement("span",null))})),r.a.createElement(v.a.Item,null,r.a.createElement(m.a,{type:"dashed",onClick:function(){n()},style:{width:"80%"}},r.a.createElement(C.a,null)," Add image url")))})),r.a.createElement(v.a.Item,{label:"Icon",name:"icon"},r.a.createElement(h.a,{onChange:D,placeholder:"icon url",style:{width:"100%",marginRight:8}})),r.a.createElement(m.a,{type:"primary",htmlType:"submit"},"Submit")))})),G=n(115),Q=n(403),Y=n(397),K=n(116),z=n.n(K),J={width:"50px",height:"100%",marginRight:"10px"},H=function(e){var t=e.handleEditProp,n=e.handleDeleteProp,a=e.productsAllWithoutRecycleBinProp,i=[{title:"Name",dataIndex:"name",key:"name"},{title:"ID",dataIndex:"id",key:"id"},{title:"Price",dataIndex:"price",key:"price",render:function(e){return function(e){return Number(e/100).toLocaleString("en-US",{style:"currency",currency:"USD"})}(e)}},{title:"Categories",dataIndex:"categories",key:"categories",render:function(e){return r.a.createElement("span",null,e.map((function(e){return r.a.createElement(Q.a,{color:"blue",key:String(e)},e)})))}},{title:"Images",dataIndex:"images",key:"images",render:function(e){return e?r.a.createElement("div",null,e.map((function(e,t){return r.a.createElement("img",{key:String("".concat(e,"+").concat(t)),alt:"img",src:String(e),style:J})}))):r.a.createElement("span",null,"no  images")}},{title:"Actions",dataIndex:"id",key:"id",render:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{title:"Edit this product"},r.a.createElement(m.a,{onClick:function(){return t(e)},type:"dashed"},"Edit")),r.a.createElement(s.a,{title:"Move to recycle bin"},r.a.createElement(m.a,{style:{float:"right"},onClick:function(){return n(e)},type:"dashed",danger:!0,icon:r.a.createElement(z.a,null)})))}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{dataSource:a,columns:i,rowKey:"id"}))};function V(){var e=Object(D.a)(["\n    mutation UpdateProduct($id: ID!, $name: String!, $price: Float!, $categories: [String], $images: [String], $icon: String) {\n  updateProduct(id: $id, name: $name, price: $price, categories: $categories, images: $images, icon: $icon) {\n    id\n    name\n    price\n    images\n    icon\n    categories\n  }\n}\n    "]);return V=function(){return e},e}var X=R()(V());function Z(){var e=Object(D.a)(["\n    query ProductsByCategoryId($id: String!) {\n  productsByCategoryId(id: $id) {\n    id\n    name\n    price\n    images\n    icon\n    categories\n  }\n}\n    "]);return Z=function(){return e},e}var ee=R()(Z());function te(e){return $.c(ee,e)}var ne=Object(o.b)(null,{setIsOpenEditProductModal:function(e){return{type:"IS_OPEN_EDIT_PRODUCT_MODAL",payload:e}},editProduct:function(e){return{type:"EDIT_PRODUCT",payload:e}}})((function(e){var t,n=e.editProduct,i=e.setIsOpenEditProductModal,l=M(),o=l.loading,c=l.error,d=l.data,u=(t={refetchQueries:[{query:ee,variables:{catId:P}}]},$.b(X,t)),s=Object(E.a)(u,2),m=s[0];Object(G.a)(s[1]);var g=Object(a.useState)(!1),p=Object(E.a)(g,2),y=p[0],v=p[1],h=Object(a.useState)({}),O=Object(E.a)(h,2),b=O[0],C=O[1];if(console.log("productDeleted",b),o)return r.a.createElement("div",null,"Loading...");if(c||!d)return r.a.createElement("div",null,"Error...");var I=d.productsAll,A=null===I||void 0===I?void 0:I.filter((function(e){var t;return!(null===e||void 0===e||null===(t=e.categories)||void 0===t?void 0:t.includes(P))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(H,{productsAllWithoutRecycleBinProp:A,handleEditProp:function(e){var t=null===A||void 0===A?void 0:A.find((function(t){return t.id===e}));n(t),i(!0)},handleDeleteProp:function(e){v(!0),C(A.find((function(t){return t.id===e})))}}),r.a.createElement(f.a,{title:"Delete product in recycle bin?",visible:Boolean(y),onOk:function(){return function(e){var t=e.id,n=e.name,a=e.price,r=e.categories,i=e.images,l=e.icon;r.push(P),m({variables:{id:t,name:n,price:a,categories:r,images:i,icon:l}}).then((function(e){return console.log("updateProductMESSAGE:",e)})).catch((function(e){return console.log("updateProductERROR:",e)})),v(!1)}(b)},onCancel:function(){v(!1)}},r.a.createElement("p",null,b.id)))})),ae=Object(o.b)(null,{setIsOpenAddProductModal:_,clearEditProduct:function(){return{type:"CLEAR_EDIT_PRODUCT"}}})((function(e){var t=e.setIsOpenAddProductModal,n=e.clearEditProduct;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Products"),r.a.createElement(ne,null),r.a.createElement(W,null),r.a.createElement(s.a,{title:"Add Product"},r.a.createElement(m.a,{onClick:function(){n(),t(!0)},type:"dashed",shape:"circle",style:{position:"fixed",bottom:"50px",right:"50px",color:"#08c"}},r.a.createElement(g.a,{style:{fontSize:"22px",color:"#08c"}}))))}));function re(){var e=Object(D.a)(["\n    query CategoryById($id: String) {\n  categoryById(id: $id) {\n    id\n    name\n    icons\n    images\n    parent\n  }\n}\n    "]);return re=function(){return e},e}var ie=R()(re());function le(){var e=Object(D.a)(["\n    mutation DeleteCascadeCategoryWithProductsById($id: String!) {\n  deleteCascadeCategoryWithProductsById(id: $id) {\n    __typename\n  }\n}\n    "]);return le=function(){return e},e}var oe=R()(le());var ce={width:"20px",height:"100%",marginRight:"10px"},de=Object(o.b)(null,{editCategory:function(e){return{type:"EDIT_CATEGORY",payload:e}},setIsOpenEditCategoryModal:function(e){return{type:"IS_OPEN_EDIT_CATEGORY_MODAL",payload:e}}})((function(e){var t,n=e.editCategory,i=e.setIsOpenEditCategoryModal,l=L(),o=l.loading,c=l.error,d=l.data,u=(t={refetchQueries:[{query:N}]},$.b(oe,t)),g=Object(E.a)(u,2),p=g[0];Object(G.a)(g[1]);var y=Object(a.useState)(!1),v=Object(E.a)(y,2),h=v[0],O=v[1],b=Object(a.useState)({}),C=Object(E.a)(b,2),I=C[0],A=C[1];if(o)return r.a.createElement("div",null,"Loading...");if(c||!d)return r.a.createElement("div",null,"Error...");var S=d.categoriesAll,_=null===S||void 0===S?void 0:S.filter((function(e){return e.id!==P})),j=[{title:"Name",dataIndex:"name",key:"name"},{title:"ID",dataIndex:"id",key:"id"},{title:"Icons",dataIndex:"icons",key:"icons",render:function(e){return 0!==e.length?r.a.createElement("div",null,e.map((function(e){return r.a.createElement("img",{key:String(e),alt:"img",src:String(e),style:ce})}))):r.a.createElement("span",null,"no icons")}},{title:"Images",dataIndex:"images",key:"images",render:function(e){return 0!==e.length?r.a.createElement("div",null,e.map((function(e){return r.a.createElement("img",{key:String(e),alt:"img",src:String(e),style:ce})}))):r.a.createElement("span",null,"no images")}},{title:"Actions",dataIndex:"id",key:"id",render:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{title:"Edit this category"},r.a.createElement(m.a,{onClick:function(){return function(e){var t=null===_||void 0===_?void 0:_.find((function(t){return t.id===e}));n(t),i(!0)}(e)},type:"dashed"},"Edit")),r.a.createElement(s.a,{title:"Delete Category With All Products"},r.a.createElement(m.a,{style:{float:"right"},onClick:function(){return function(e){O(!0),A(_.find((function(t){return t.id===e})))}(e)},type:"dashed",danger:!0,icon:r.a.createElement(z.a,null)})))}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{dataSource:_,columns:j,rowKey:"id"}),r.a.createElement(f.a,{title:"Delete Category With All Products WITHOUT recovery!?",visible:Boolean(h),onOk:function(){return e=I.id,p({variables:{id:String(e)}}).then((function(e){return console.log("deleteCascadeCategoryWithProductsById response:",e)})),void O(!1);var e},onCancel:function(){O(!1)}},r.a.createElement("p",null,I.name)))}));function ue(){var e=Object(D.a)(["\n    mutation AddCategory($id: String!, $name: String!, $images: [String], $icons: [String], $parent: String) {\n  addCategory(id: $id, name: $name, images: $images, icons: $icons, parent: $parent) {\n    id\n    name\n    images\n    icons\n    parent\n  }\n}\n    "]);return ue=function(){return e},e}var se=R()(ue());var me={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},ge={wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:4}}},pe=Object(o.b)((function(e){return{isOpenAddCategoryModal:e.add_cat_modal.isOpen}}),{setIsOpenAddCategoryModal:j})((function(e){var t,n=e.setIsOpenAddCategoryModal,i=e.isOpenAddCategoryModal,l=(t={update:function(e,t){var n=t.data.addCategory,a=e.readQuery({query:q}).categoriesAll.categoriesAll;e.writeQuery({query:N,data:{categoriesAll:null===a||void 0===a?void 0:a.concat([n])}})},refetchQueries:[{query:N}]},$.b(se,t)),o=Object(E.a)(l,2),c=o[0],d=(o[1].data,L()),u=(d.loading,d.error,d.data,Object(a.useState)({})),s=Object(E.a)(u,2),g=s[0],O=s[1],b=function(e){var t=e.target,n=t.name,a=t.value;console.log("target",e.target),O(Object(y.a)({},g,Object(p.a)({},n,a)))};return r.a.createElement(f.a,{title:"Category information",visible:Boolean(i),footer:!1,onCancel:function(){n(!1)}},r.a.createElement(v.a,Object.assign({name:"category"},ge,{onFinish:function(e){var t=g.name,a=g.id,r=e.icons,i=e.images;c({variables:{id:a,name:t,icons:r,images:i}}).then((function(e){return console.log("addCategory:",e)})).catch((function(e){return console.log("addCategoryERROR:",e)})),n(!1)}}),r.a.createElement(v.a.Item,{label:"ID category",rules:[{required:!0,message:"ID category is required"}]},r.a.createElement(h.a,{name:"name",onChange:b,placeholder:"name category",style:{width:"100%",marginRight:8}})),r.a.createElement(v.a.Item,{label:"Name category",rules:[{required:!0,message:"Name category is required"}]},r.a.createElement(h.a,{name:"name",onChange:b,placeholder:"name category",style:{width:"100%",marginRight:8}})),r.a.createElement(v.a.List,{name:"icons"},(function(e,t){var n=t.add,a=t.remove;return r.a.createElement("div",null,e.map((function(t,n){return r.a.createElement(v.a.Item,Object.assign({},0===n?me:ge,{label:0===n?"icons":"",required:!1,key:t.key}),r.a.createElement(v.a.Item,Object.assign({},t,{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input icon url or delete this field."}],noStyle:!0}),r.a.createElement(h.a,{style:{width:"90%",marginRight:8}})),e.length>=1?r.a.createElement(A.a,{className:"dynamic-delete-button",onClick:function(){a(t.name)}}):r.a.createElement("span",null))})),r.a.createElement(v.a.Item,null,r.a.createElement(m.a,{type:"dashed",onClick:function(){n()},style:{width:"80%"}},r.a.createElement(C.a,null)," Add icon url")))})),r.a.createElement(v.a.List,{name:"images"},(function(e,t){var n=t.add,a=t.remove;return r.a.createElement("div",null,e.map((function(t,n){return r.a.createElement(v.a.Item,Object.assign({},0===n?me:ge,{label:0===n?"Images":"",required:!1,key:t.key}),r.a.createElement(v.a.Item,Object.assign({},t,{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input image url or delete this field."}],noStyle:!0}),r.a.createElement(h.a,{style:{width:"90%",marginRight:8}})),e.length>=1?r.a.createElement(A.a,{className:"dynamic-delete-button",onClick:function(){a(t.name)}}):r.a.createElement("span",null))})),r.a.createElement(v.a.Item,null,r.a.createElement(m.a,{type:"dashed",onClick:function(){n()},style:{width:"80%"}},r.a.createElement(C.a,null)," Add image url")))})),r.a.createElement(m.a,{type:"primary",htmlType:"submit"},"Submit")))})),ye=Object(o.b)(null,{setIsOpenAddCategoryModal:j})((function(e){var t=e.setIsOpenAddCategoryModal;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Categories"),r.a.createElement(de,null),r.a.createElement(pe,null),r.a.createElement(s.a,{title:"Add Category"},r.a.createElement(m.a,{onClick:function(){t(!0)},type:"dashed",shape:"circle",style:{position:"fixed",bottom:"50px",right:"50px",color:"#08c"}},r.a.createElement(g.a,{style:{fontSize:"22px",color:"#08c"}}))))})),Ee=u.a.TabPane;function fe(e){console.log(e)}var ve=function(){var e,t=L(),n=t.loading,a=t.error,i=t.data,l=M(),o=l.loading,c=l.error,d=l.data,s=te({variables:{id:P}}),m=s.loading,g=s.error,p=s.data,y=te({variables:{id:P}}),E=y.loading,f=y.error,v=y.data,h=(e={variables:{id:P}},$.c(ie,e)),O=h.loading,b=h.error,C=h.data;if(n||o||E||m||O)return r.a.createElement("div",null,"Loading...");if(a||c||g||f||b||!i||!d||!v||!C||!p)return r.a.createElement("div",null,"Error.");v.productsByCategoryId,C.categoryById;return r.a.createElement(u.a,{defaultActiveKey:"1",onChange:fe},r.a.createElement(u.a.TabPane,{tab:"Products",key:"1"},r.a.createElement(ae,null)),r.a.createElement(Ee,{tab:"Categories",key:"2"},r.a.createElement(ye,null)))},he=(n(389),n(390),function(){return console.log("app.tsx"),r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("p",null,r.a.createElement("code",null,"APP")),r.a.createElement("a",{className:"App-link",href:"https://glacial-mesa-30936.herokuapp.com/graphql",target:"_blank",rel:"noopener noreferrer"},"BASE_URL")),r.a.createElement(ve,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Oe=n(199),be=new(n(68).a),Ce=new Oe.a({cache:be,uri:"https://glacial-mesa-30936.herokuapp.com/graphql"}),Ie=n(57),Ae={isOpen:!1},Pe={isOpen:!1},Se={isOpen:!1},_e={isOpen:!1},je={product:{}},De={category:{}},ke=Object(Ie.combineReducers)({add_cat_modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS_OPEN_ADD_CATEGORY_MODAL":return Object(y.a)({},e,{isOpen:t.payload});default:return e}},edit_cat_modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS_OPEN_EDIT_CATEGORY_MODAL":return Object(y.a)({},e,{isOpen:t.payload});default:return e}},edit_product_modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS_OPEN_EDIT_PRODUCT_MODAL":return Object(y.a)({},e,{isOpen:t.payload});default:return e}},add_product_modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS_OPEN_ADD_PRODUCT_MODAL":return Object(y.a)({},e,{isOpen:t.payload});default:return e}},edit_product:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"EDIT_PRODUCT":return Object(y.a)({},e,{product:t.payload});case"CLEAR_EDIT_PRODUCT":return Object(y.a)({},je);default:return e}},edit_category:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"EDIT_CATEGORY":return Object(y.a)({},e,{category:t.payload});case"CLEAR_EDIT_CATEGORY":return Object(y.a)({},De);default:return e}}}),Re=n(196),$e=Object(Re.composeWithDevTools)(),we=Object(Ie.createStore)(ke,{},$e);l.a.render(r.a.createElement(o.a,{store:we},r.a.createElement(c.a,{client:Ce},r.a.createElement(d.a,{client:Ce},r.a.createElement(he,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[203,1,2]]]);
//# sourceMappingURL=main.02de48e8.chunk.js.map