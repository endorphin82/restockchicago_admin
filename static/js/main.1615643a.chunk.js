(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{204:function(e,t,n){e.exports=n(394)},213:function(e,t,n){},391:function(e,t,n){},394:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(7),l=n.n(i),c=n(26),o=n(397),d=n(30),u=(n(213),n(400)),s=n(85),m=n(201),g=n(37),p=n(403),y=n(39),E=n(10),f=n(398),v=n(401),h=n(22),b=n(24),O=n.n(b),I=n(21);function C(){var e=Object(h.a)(["\n    query CategoriesAll {\n  categoriesAll {\n    id\n    name\n    icons\n    images\n  }\n}\n    "]);return C=function(){return e},e}var j=O()(C());function P(e){return I.c(j,e)}var S=String("5e84ad3fe6b396aef7657ca4"),A=String("https://endorphin82.github.io/restockchicago-img/img/no-image/no-image-available.svg");function _(){var e=Object(h.a)(["\n    mutation DeleteCascadeCategoryWithProductsById($id: ID!) {\n  deleteCascadeCategoryWithProductsById(id: $id) {\n    __typename\n  }\n}\n    "]);return _=function(){return e},e}var k=O()(_());var R=n(115),D=n.n(R),w=function(e){return{type:"EDIT_PRODUCT",payload:e}},$=function(){return{type:"CLEAR_EDIT_PRODUCT"}},q=function(e){return{type:"IS_OPEN_EDIT_PRODUCT_MODAL",payload:e}},x=function(e){return{type:"IS_OPEN_ADD_PRODUCT_MODAL",payload:e}},T=function(e){return{type:"IS_OPEN_EDIT_CATEGORY_MODAL",payload:e}},M=function(e){return{type:"IS_OPEN_ADD_CATEGORY_MODAL",payload:e}},B={width:"20px",height:"100%",marginRight:"10px"},N=Object(c.b)(null,{editCategory:function(e){return{type:"EDIT_CATEGORY",payload:e}},setIsOpenEditCategoryModal:T})((function(e){var t,n=e.editCategory,i=e.setIsOpenEditCategoryModal,l=P(),c=l.loading,o=l.error,d=l.data,u=(t={refetchQueries:[{query:j}]},I.b(k,t)),s=Object(E.a)(u,2),p=s[0];Object(y.a)(s[1]);var h=Object(a.useState)(!1),b=Object(E.a)(h,2),O=b[0],C=b[1],A=Object(a.useState)({}),_=Object(E.a)(A,2),R=_[0],w=_[1];if(c)return r.a.createElement("div",null,"Loading...");if(o||!d)return r.a.createElement("div",null,"Error...");var $=d.categoriesAll,q=null===$||void 0===$?void 0:$.filter((function(e){return e.id!==S})),x=[{title:"Name",dataIndex:"name",key:"name"},{title:"ID",dataIndex:"id",key:"id"},{title:"Icons",dataIndex:"icons",key:"icons",render:function(e){return 0!==e.length?r.a.createElement("div",null,e.map((function(e){return r.a.createElement("img",{key:String(e),alt:"img",src:String(e),style:B})}))):r.a.createElement("span",null,"no icons")}},{title:"Actions",dataIndex:"id",key:"id",render:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{title:"Edit this category"},r.a.createElement(g.a,{onClick:function(){return function(e){var t=null===q||void 0===q?void 0:q.find((function(t){return t.id===e}));n(t),i(!0)}(e)},type:"dashed"},"Edit")),r.a.createElement(m.a,{title:"Delete Category With All Products"},r.a.createElement(g.a,{style:{float:"right"},onClick:function(){return function(e){C(!0),w(q.find((function(t){return t.id===e})))}(e)},type:"dashed",danger:!0,icon:r.a.createElement(D.a,null)})))}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{dataSource:q,columns:x,rowKey:"id"}),r.a.createElement(v.a,{title:"Delete Category With All Products WITHOUT recovery!?",visible:Boolean(O),onOk:function(){return e=R.id,p({variables:{id:String(e)}}).then((function(e){return console.log("deleteCascadeCategoryWithProductsById response:",e)})),void C(!1);var e},onCancel:function(){C(!1)}},r.a.createElement("p",null,R.name)))})),L=n(16),F=n(23);function U(){var e=Object(h.a)(["\n    mutation AddCategory($name: String!, $images: [String], $icons: [String]) {\n  addCategory(name: $name, images: $images, icons: $icons) {\n    id\n    name\n    images\n    icons\n  }\n}\n    "]);return U=function(){return e},e}var G=O()(U());function Q(){var e=Object(h.a)(["\n    query ProductsAll {\n  productsAll {\n    id\n    name\n    price\n    images\n    icon\n    category {\n      id\n      name\n      icons\n    }\n  }\n}\n    "]);return Q=function(){return e},e}var W=O()(Q());function Y(e){return I.c(W,e)}var K=n(399),V=n(402),z=n(47),J=n.n(z),H=n(42),X=n.n(H),Z={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},ee={wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:4}}},te=Object(c.b)((function(e){return{isOpenAddCategoryModal:e.add_cat_modal.isOpen}}),{setIsOpenAddCategoryModal:M})((function(e){var t,n=e.setIsOpenAddCategoryModal,i=e.isOpenAddCategoryModal,l=(t={update:function(e,t){var n=t.data.addCategory,a=e.readQuery({query:W}).categoriesAll.categoriesAll;e.writeQuery({query:j,data:{categoriesAll:null===a||void 0===a?void 0:a.concat([n])}})},refetchQueries:[{query:j}]},I.b(G,t)),c=Object(E.a)(l,2),o=c[0],d=(c[1].data,P()),u=(d.loading,d.error,d.data,Object(a.useState)({})),s=Object(E.a)(u,2),m=s[0],p=s[1];return r.a.createElement(v.a,{title:"Category information",visible:Boolean(i),footer:!1,onCancel:function(){n(!1)}},r.a.createElement(K.a,Object.assign({name:"category"},ee,{onFinish:function(e){var t=m.name,a=e.icons,r=e.images;o({variables:{name:t,icons:a,images:r}}).then((function(e){return console.log("addCategory:",e)})).catch((function(e){return console.log("addCategoryERROR:",e)})),n(!1)}}),r.a.createElement(K.a.Item,{label:"Name category",rules:[{required:!0,message:"Name category is required"}]},r.a.createElement(V.a,{name:"name",onChange:function(e){var t=e.target,n=t.name,a=t.value;console.log("target",e.target),p(Object(F.a)({},m,Object(L.a)({},n,a)))},placeholder:"name category",style:{width:"100%",marginRight:8}})),r.a.createElement(K.a.List,{name:"icons"},(function(e,t){var n=t.add,a=t.remove;return r.a.createElement("div",null,e.map((function(t,n){return r.a.createElement(K.a.Item,Object.assign({},0===n?Z:ee,{label:0===n?"icons":"",required:!1,key:t.key}),r.a.createElement(K.a.Item,Object.assign({},t,{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input icon url or delete this field."}],noStyle:!0}),r.a.createElement(V.a,{style:{width:"90%",marginRight:8}})),e.length>=1?r.a.createElement(J.a,{className:"dynamic-delete-button",onClick:function(){a(t.name)}}):r.a.createElement("span",null))})),r.a.createElement(K.a.Item,null,r.a.createElement(g.a,{type:"dashed",onClick:function(){n()},style:{width:"80%"}},r.a.createElement(X.a,null)," Add icon url")))})),r.a.createElement(K.a.List,{name:"images"},(function(e,t){var n=t.add,a=t.remove;return r.a.createElement("div",null,e.map((function(t,n){return r.a.createElement(K.a.Item,Object.assign({},0===n?Z:ee,{label:0===n?"Images":"",required:!1,key:t.key}),r.a.createElement(K.a.Item,Object.assign({},t,{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input image url or delete this field."}],noStyle:!0}),r.a.createElement(V.a,{style:{width:"90%",marginRight:8}})),e.length>=1?r.a.createElement(J.a,{className:"dynamic-delete-button",onClick:function(){a(t.name)}}):r.a.createElement("span",null))})),r.a.createElement(K.a.Item,null,r.a.createElement(g.a,{type:"dashed",onClick:function(){n()},style:{width:"80%"}},r.a.createElement(X.a,null)," Add image url")))})),r.a.createElement(g.a,{type:"primary",htmlType:"submit"},"Submit")))}));function ne(){var e=Object(h.a)(["\n    mutation UpdateCategory($id: ID!, $name: String!, $images: [String], $icons: [String]) {\n  updateCategory(id: $id, name: $name, images: $images, icons: $icons) {\n    id\n    images\n    icons\n  }\n}\n    "]);return ne=function(){return e},e}var ae=O()(ne());var re={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},ie={wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:4}}},le=Object(c.b)((function(e){return{isOpenEditCategoryModal:e.edit_cat_modal.isOpen,edited_category:e.edit_category.category}}),{setIsOpenEditCategoryModal:T,clearEditCategory:function(){return{type:"CLEAR_EDIT_CATEGORY"}}})((function(e){var t,n=e.edited_category,i=e.setIsOpenEditCategoryModal,l=e.isOpenEditCategoryModal,c=K.a.useForm(),o=Object(E.a)(c,1)[0],d=I.b(ae,t),u=Object(E.a)(d,2),s=u[0];Object(y.a)(u[1]);var m=Object(a.useState)({}),p=Object(E.a)(m,2),f=p[0],h=p[1];Object(a.useEffect)((function(){h(n)}),[n]),Object(a.useEffect)((function(){return o.setFieldsValue({name:n.name,icons:n.icons,images:n.images}),function(){o.resetFields()}}),[n]);return r.a.createElement(v.a,{title:"Category information id: ".concat(f.id),visible:Boolean(l),footer:!1,onCancel:function(){i(!1)}},r.a.createElement(K.a,Object.assign({form:o,name:"category"},ie,{onFinish:function(e){var t=e.name,n=e.images,a=e.icons,r=String(null===f||void 0===f?void 0:f.id);s({variables:{id:r,name:t,images:n,icons:a}}).then((function(e){return console.log("updateProductMESSAGE:",e)})).catch((function(e){return console.log("updateProductERROR:",e)})),i(!1)}}),r.a.createElement(K.a.Item,{label:"Name category",name:"name",value:String(null===f||void 0===f?void 0:f.name),rules:[{required:!0,message:"Name category is required"}]},r.a.createElement(V.a,{onChange:function(e){var t=e.target,n=t.name,a=t.value;h(Object(F.a)({},f,Object(L.a)({},n,a)))},placeholder:"name category",style:{width:"100%",marginRight:8}})),r.a.createElement(K.a.List,{name:"icons"},(function(e,t){var n=t.add,a=t.remove;return r.a.createElement("div",null,e.map((function(t,n){return r.a.createElement(K.a.Item,Object.assign({},0===n?re:ie,{label:0===n?"icons":"",required:!1,key:t.key}),r.a.createElement(K.a.Item,Object.assign({},t,{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input icons url or delete this field."}],noStyle:!0}),r.a.createElement(V.a,{value:f.icons[n],placeholder:"icon url",style:{width:"90%",marginRight:8}})),e.length>1?r.a.createElement(J.a,{className:"dynamic-delete-button",onClick:function(){a(t.name)}}):r.a.createElement("span",null))})),r.a.createElement(K.a.Item,null,r.a.createElement(g.a,{type:"dashed",onClick:function(){n()},style:{width:"80%"}},r.a.createElement(X.a,null)," Add icon url")))})),r.a.createElement(K.a.List,{name:"images"},(function(e,t){var n=t.add,a=t.remove;return r.a.createElement("div",null,e.map((function(t,n){return r.a.createElement(K.a.Item,Object.assign({},0===n?re:ie,{label:0===n?"Images":"",required:!1,key:t.key}),r.a.createElement(K.a.Item,Object.assign({},t,{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input image url or delete this field."}],noStyle:!0}),r.a.createElement(V.a,{value:f.images[n],placeholder:"image url",style:{width:"90%",marginRight:8}})),e.length>1?r.a.createElement(J.a,{className:"dynamic-delete-button",onClick:function(){a(t.name)}}):r.a.createElement("span",null))})),r.a.createElement(K.a.Item,null,r.a.createElement(g.a,{type:"dashed",onClick:function(){n()},style:{width:"80%"}},r.a.createElement(X.a,null)," Add image url")))})),r.a.createElement(g.a,{type:"primary",htmlType:"submit"},"Submit")))})),ce=Object(c.b)(null,{setIsOpenAddCategoryModal:M})((function(e){var t=e.setIsOpenAddCategoryModal;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Categories"),r.a.createElement(N,null),r.a.createElement(le,null),r.a.createElement(te,null),r.a.createElement(m.a,{title:"Add Category"},r.a.createElement(g.a,{onClick:function(){t(!0)},type:"dashed",shape:"circle",style:{position:"fixed",bottom:"50px",right:"50px",color:"#08c"}},r.a.createElement(p.a,{style:{fontSize:"22px",color:"#08c"}}))))})),oe=function(e){return Math.round(100*parseFloat(e.replace(/[$,]/g,"")))},de=function(e){return Number(e/100).toLocaleString("en-US",{style:"currency",currency:"USD"})};var ue={width:"50px",height:"100%",marginRight:"10px"},se={width:"20px",height:"100%",marginRight:"10px"},me=function(e){var t=e.handleEditProp,n=e.handleDeleteProp,a=e.productsAllWithoutRecycleBinProp,i=[{title:"Name",dataIndex:"name",key:"name"},{title:"ID",dataIndex:"id",key:"id"},{title:"Price",dataIndex:"price",key:"price",render:function(e){return de(e)}},{title:"Category",dataIndex:"category",key:"category",render:function(e){var t=e.name,n=e.icons,a=e.id;return r.a.createElement("div",null,r.a.createElement("span",null,t," "),0!==(null===n||void 0===n?void 0:n.length)?r.a.createElement("img",{key:String(n[0]),alt:"img",src:String(n[0]),style:se}):"",r.a.createElement("span",null," ",a," "))}},{title:"Images",dataIndex:"images",key:"images",render:function(e){return e?r.a.createElement("div",null,e.map((function(e,t){return r.a.createElement("img",{key:String("".concat(e,"+").concat(t)),alt:"img",src:String(e),style:ue})}))):r.a.createElement("span",null,"no  images")}},{title:"Actions",dataIndex:"id",key:"id",render:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{title:"Edit this product"},r.a.createElement(g.a,{onClick:function(){return t(e)},type:"dashed"},"Edit")),r.a.createElement(m.a,{title:"Move to recycle bin"},r.a.createElement(g.a,{style:{float:"right"},onClick:function(){return n(e)},type:"dashed",danger:!0,icon:r.a.createElement(D.a,null)})))}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{dataSource:a,columns:i,rowKey:"id"}))};function ge(){var e=Object(h.a)(["\n    mutation UpdateProduct($id: ID!, $name: String!, $price: Float!, $categoryId: ID!, $images: [String], $icon: String) {\n  updateProduct(id: $id, name: $name, price: $price, categoryId: $categoryId, images: $images, icon: $icon) {\n    id\n    name\n    price\n    images\n    icon\n    category {\n      id\n      name\n      icons\n    }\n  }\n}\n    "]);return ge=function(){return e},e}var pe=O()(ge());function ye(e){return I.b(pe,e)}function Ee(){var e=Object(h.a)(["\n    query ProductsByCategoryId($categoryId: ID!) {\n  productsByCategoryId(categoryId: $categoryId) {\n    id\n    name\n    price\n    images\n    icon\n    category {\n      id\n      name\n      icons\n    }\n  }\n}\n    "]);return Ee=function(){return e},e}var fe=O()(Ee());function ve(e){return I.c(fe,e)}var he=Object(c.b)(null,{setIsOpenEditProductModal:q,editProduct:w})((function(e){var t=e.editProduct,n=e.setIsOpenEditProductModal,i=Y(),l=i.loading,c=i.error,o=i.data,d=ye({refetchQueries:[{query:fe,variables:{categoryId:S}}]}),u=Object(E.a)(d,2),s=u[0];Object(y.a)(u[1]);var m=Object(a.useState)(!1),g=Object(E.a)(m,2),p=g[0],f=g[1],h=Object(a.useState)({}),b=Object(E.a)(h,2),O=b[0],I=b[1];if(console.log("productDeleted",O),l)return r.a.createElement("div",null,"Loading...");if(c||!o)return r.a.createElement("div",null,"Error...");var C=o.productsAll,j=null===C||void 0===C?void 0:C.filter((function(e){var t;return(null===e||void 0===e||null===(t=e.category)||void 0===t?void 0:t.id)!==S}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(me,{productsAllWithoutRecycleBinProp:j,handleEditProp:function(e){var a=null===j||void 0===j?void 0:j.find((function(t){return t.id===e}));t(a),n(!0)},handleDeleteProp:function(e){f(!0),I(j.find((function(t){return t.id===e})))}}),r.a.createElement(v.a,{title:"Delete product in recycle bin?",visible:Boolean(p),onOk:function(){return function(e){var t=e.id,n=e.name,a=e.price,r=e.images,i=e.icon;s({variables:{id:t,name:n,price:a,categoryId:S,images:r,icon:i}}).then((function(e){return console.log("updateProductMESSAGE:",e)})).catch((function(e){return console.log("updateProductERROR:",e)})),f(!1)}(O)},onCancel:function(){f(!1)}},r.a.createElement("p",null,O.id)))})),be=n(95),Oe={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},Ie={wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:4}}},Ce=Object(c.b)((function(e){return{isOpenEditProductModal:e.edit_product_modal.isOpen,edited_product:e.edit_product.product}}),{setIsOpenEditProductModal:q,clearEditProduct:$})((function(e){var t=e.clearEditProduct,n=e.edited_product,i=e.isOpenEditProductModal,l=e.setIsOpenEditProductModal,c=K.a.useForm(),o=Object(E.a)(c,1)[0],d=ye(),u=Object(E.a)(d,2),s=u[0];Object(y.a)(u[1]);var m=P(),p=m.loading,f=m.error,h=m.data,b=Object(a.useState)({}),O=Object(E.a)(b,2),I=O[0],C=O[1];Object(a.useEffect)((function(){C(n)}),[n]),Object(a.useEffect)((function(){return o.setFieldsValue({name:n.name,price:n.price,images:n.images,icon:n.icon}),function(){o.resetFields()}}),[n]);var j=function(e){var t=e.target,n=t.name,a=t.value;C(Object(F.a)({},I,Object(L.a)({},n,a)))};if(p)return r.a.createElement("div",null,"Loading...");if(f||!h)return r.a.createElement("div",null,"Error...");var A=h.categoriesAll,_=null===A||void 0===A?void 0:A.filter((function(e){return(null===e||void 0===e?void 0:e.id)!==S}));return r.a.createElement(v.a,{title:"Product information id: ".concat(I.id),visible:Boolean(i),footer:!1,onCancel:function(){l(!1),t()}},r.a.createElement(K.a,Object.assign({form:o,name:"product"},Ie,{onFinish:function(e){var t=e.name,n=e.categoryId,a=e.images,r=e.icon,i=String(null===I||void 0===I?void 0:I.id),c=oe(String(e.price));s({variables:{id:i,name:t,price:c,categoryId:String(n),images:a,icon:r}}).then((function(e){return console.log("updateProductMESSAGE:",e)})).catch((function(e){return console.log("updateProductERROR:",e)})),l(!1)}}),r.a.createElement(K.a.Item,{label:"Name product",name:"name",value:String(null===I||void 0===I?void 0:I.name),rules:[{required:!0,message:"Name product is required"}]},r.a.createElement(V.a,{onChange:j,placeholder:"name product",style:{width:"100%",marginRight:8}})),r.a.createElement(K.a.Item,{label:"Price",name:"price",rules:[{required:!0,message:"Price is required"}]},r.a.createElement(V.a,{type:"number",placeholder:"Price $",style:{width:"100%",marginRight:8}})),r.a.createElement(K.a.Item,{label:"Category",name:"categoryId",onChange:j,rules:[{required:!0,message:"Category is required"}]},r.a.createElement(be.a,{placeholder:"Select category"},null===_||void 0===_?void 0:_.map((function(e){return r.a.createElement(be.a.Option,{key:String(null===e||void 0===e?void 0:e.id),firstActiveValue:"nike",value:String(null===e||void 0===e?void 0:e.id)},String(null===e||void 0===e?void 0:e.name))})))),r.a.createElement(K.a.List,{name:"images"},(function(e,t){var n=t.add,a=t.remove;return r.a.createElement("div",null,e.map((function(t,n){return r.a.createElement(K.a.Item,Object.assign({},0===n?Oe:Ie,{label:0===n?"Images":"",required:!1,key:t.key}),r.a.createElement(K.a.Item,Object.assign({},t,{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input image url or delete this field."}],noStyle:!0}),r.a.createElement(V.a,{value:I.images[n],placeholder:"image url",style:{width:"90%",marginRight:8}})),e.length>1?r.a.createElement(J.a,{className:"dynamic-delete-button",onClick:function(){a(t.name)}}):r.a.createElement("span",null))})),r.a.createElement(K.a.Item,null,r.a.createElement(g.a,{type:"dashed",onClick:function(){n()},style:{width:"80%"}},r.a.createElement(X.a,null)," Add image url")))})),r.a.createElement(K.a.Item,{label:"Icon",name:"icon"},r.a.createElement(V.a,{onChange:j,placeholder:"icon url",style:{width:"100%",marginRight:8}})),r.a.createElement(g.a,{type:"primary",htmlType:"submit"},"Submit")))}));function je(){var e=Object(h.a)(["\n    mutation AddProduct($name: String!, $price: Float!, $categoryId: ID!, $images: [String], $icon: String) {\n  addProduct(name: $name, price: $price, categoryId: $categoryId, images: $images, icon: $icon) {\n    id\n    name\n    price\n    images\n    icon\n    category {\n      id\n      name\n      icons\n    }\n  }\n}\n    "]);return je=function(){return e},e}var Pe=O()(je());var Se={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},Ae={wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:4}}},_e=Object(c.b)((function(e){return{isOpenAddProductModal:e.add_product_modal.isOpen}}),{setIsOpenAddProductModal:x})((function(e){var t,n=e.isOpenAddProductModal,i=e.setIsOpenAddProductModal,l=(t={update:function(e,t){var n=t.data.addProduct,a=e.readQuery({query:W}).productsAll.productsAll;e.writeQuery({query:W,data:{productsAll:null===a||void 0===a?void 0:a.concat([n])}})},refetchQueries:[{query:W}]},I.b(Pe,t)),c=Object(E.a)(l,2),o=c[0],d=(c[1].data,P()),u=d.loading,s=d.error,m=d.data,p=Object(a.useState)({}),y=Object(E.a)(p,2),f=y[0],h=y[1];console.log("values+++",f);var b=function(e){var t=e.target,n=t.name,a=t.value;console.log("target",e.target),h(Object(F.a)({},f,Object(L.a)({},n,a)))};if(u)return r.a.createElement("div",null,"Loading...");if(s||!m)return r.a.createElement("div",null,"Error...");var O=m.categoriesAll,C=null===O||void 0===O?void 0:O.filter((function(e){return(null===e||void 0===e?void 0:e.id)!==S}));return console.log("isOpenAddProductModal",n),r.a.createElement(v.a,{title:"Product information",visible:Boolean(n),footer:!1,onCancel:function(){i(!1)}},r.a.createElement(K.a,Object.assign({name:"product"},Ae,{onFinish:function(e){console.log("Received values of form:",f);var t=f.name,n=f.categoryId,a=f.icon,r=oe(f.price);console.log("onFinish"),o({variables:{name:t,price:r,categoryId:n,images:e.images?e.images:[A],icon:a}}).then((function(e){return console.log("addProduct:",e)})).catch((function(e){return console.log("addProductERROR:",e)})),i(!1)}}),r.a.createElement(K.a.Item,{label:"Name product",rules:[{required:!0,message:"Name product is required"}]},r.a.createElement(V.a,{name:"name",onChange:b,placeholder:"name product",style:{width:"100%",marginRight:8}})),r.a.createElement(K.a.Item,{label:"Price",rules:[{required:!0,message:"Price is required"}]},r.a.createElement(V.a,{name:"price",onChange:b,type:"number",placeholder:"Price $",style:{width:"100%",marginRight:8}})),r.a.createElement(K.a.Item,{label:"Category",name:"categoryId",rules:[{required:!0,message:"Category is required"}]},r.a.createElement(be.a,{onChange:function(e){h(Object(F.a)({},f,{categoryId:e}))},placeholder:"Select category"},null===C||void 0===C?void 0:C.map((function(e){return r.a.createElement(be.a.Option,{key:String(null===e||void 0===e?void 0:e.id),value:String(null===e||void 0===e?void 0:e.id),onChange:b},String(null===e||void 0===e?void 0:e.name))})))),r.a.createElement(K.a.List,{name:"images"},(function(e,t){var n=t.add,a=t.remove;return r.a.createElement("div",null,e.map((function(t,n){return r.a.createElement(K.a.Item,Object.assign({},0===n?Se:Ae,{label:0===n?"Images":"",required:!1,key:t.key}),r.a.createElement(K.a.Item,Object.assign({},t,{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input image url or delete this field."}],noStyle:!0}),r.a.createElement(V.a,{style:{width:"90%",marginRight:8}})),e.length>=1?r.a.createElement(J.a,{className:"dynamic-delete-button",onClick:function(){a(t.name)}}):r.a.createElement("span",null))})),r.a.createElement(K.a.Item,null,r.a.createElement(g.a,{type:"dashed",onClick:function(){n()},style:{width:"80%"}},r.a.createElement(X.a,null)," Add image url")))})),r.a.createElement(K.a.Item,{label:"Icon",name:"icon"},r.a.createElement(V.a,{onChange:b,placeholder:"icon url",style:{width:"100%",marginRight:8}})),r.a.createElement(g.a,{type:"primary",htmlType:"submit"},"Submit")))})),ke=Object(c.b)(null,{setIsOpenAddProductModal:x,clearEditProduct:$})((function(e){var t=e.setIsOpenAddProductModal,n=e.clearEditProduct;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Products"),r.a.createElement(he,null),r.a.createElement(Ce,null),r.a.createElement(_e,null),r.a.createElement(m.a,{title:"Add Product"},r.a.createElement(g.a,{onClick:function(){n(),t(!0)},type:"dashed",shape:"circle",style:{position:"fixed",bottom:"50px",right:"50px",color:"#08c"}},r.a.createElement(p.a,{style:{fontSize:"22px",color:"#08c"}}))))})),Re=function(e){var t=e.categoryById,n=e.productsByCategoryId;return 0===n.length?r.a.createElement("img",{src:String(t.icons[0]),width:15,alt:"recycle bin"}):n.length>0?r.a.createElement("img",{src:String(t.icons[3]),width:15,alt:"recycle bin"}):void 0},De=n(96);function we(){var e=Object(h.a)(["\n    query productsByCategoryId($categoryId: ID!){\n        productsByCategoryId(categoryId: $categoryId){\n            id\n            name\n            price\n            images\n            icon\n            category{\n                id\n                name\n                icons\n            }\n        }\n    }\n"]);return we=function(){return e},e}function $e(){var e=Object(h.a)(["\n    query productsAll{\n        productsAll{\n            id\n            name\n            price\n            images\n            icon\n            category{\n                id\n                name\n                icons\n            }\n        }\n    }\n"]);return $e=function(){return e},e}Object(De.b)($e());var qe=Object(De.b)(we());function xe(){var e=Object(h.a)(["\n    mutation DeleteProduct($id: ID!) {\n  deleteProduct(id: $id) {\n    id\n    name\n    price\n    images\n    icon\n    category {\n      id\n      name\n      icons\n    }\n  }\n}\n    "]);return xe=function(){return e},e}var Te=O()(xe());var Me={width:"50px",height:"100%",marginRight:"10px"},Be=Object(c.b)((function(e){return{edited_product:e.edit_product.product}}),{editProduct:w,clearEditProduct:$})((function(e){var t,n=e.clearEditProduct,i=e.editProduct,l=e.edited_product,c=ve({variables:{categoryId:S}}),o=c.loading,d=c.error,u=c.data,s=P(),p=s.loading,h=s.error,b=s.data,O=Object(a.useState)({}),C=Object(E.a)(O,2),j=C[0],A=C[1],_=Object(a.useState)(!1),k=Object(E.a)(_,2),R=k[0],D=k[1],w=Object(a.useState)(!1),$=Object(E.a)(w,2),q=$[0],x=$[1],T=Object(a.useState)({}),M=Object(E.a)(T,2),B=M[0],N=M[1],U=(t={refetchQueries:[{query:qe,variables:{categoryId:S}}]},I.b(Te,t)),G=Object(E.a)(U,2),Q=G[0];Object(y.a)(G[1]);var W=ye({refetchQueries:[{query:qe,variables:{categoryId:S}}]}),Y=Object(E.a)(W,2),V=Y[0];if(Object(y.a)(Y[1]),p)return r.a.createElement("div",null,"Loading...");if(h||!b)return r.a.createElement("div",null,"Error...");var z=b.categoriesAll,J=null===z||void 0===z?void 0:z.filter((function(e){return(null===e||void 0===e?void 0:e.id)!==S}));if(console.log("productDeleted",B),o)return r.a.createElement("div",null,"Loading...");if(d||!u)return r.a.createElement("div",null,"Error...");var H=u.productsByCategoryId;console.log("productsByCategoryId",null===u||void 0===u?void 0:u.productsByCategoryId);var X=[{title:"Name",dataIndex:"name",key:"name"},{title:"ID",dataIndex:"id",key:"id"},{title:"Price",dataIndex:"price",key:"price",render:function(e){return de(e)}},{title:"Images",dataIndex:"images",key:"images",render:function(e){return e?r.a.createElement("div",null,e.map((function(e){return r.a.createElement("img",{key:String(e),alt:"img",src:String(e),style:Me})}))):r.a.createElement("span",null,"no images")}},{title:"Actions",dataIndex:"id",key:"id",render:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{title:"Recovery this product in any category"},r.a.createElement(g.a,{onClick:function(){return function(e){i(null===H||void 0===H?void 0:H.find((function(t){return t.id===e}))),x(!0)}(e)},type:"dashed"},"Recovery in category")),r.a.createElement(m.a,{title:"Delete forever"},r.a.createElement(g.a,{onClick:function(){return function(e){D(!0),N(null===H||void 0===H?void 0:H.find((function(t){return t.id===e})))}(e)},type:"dashed",danger:!0},"Delete")))}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{dataSource:H,columns:X,rowKey:"id"}),r.a.createElement(v.a,{title:"Delete product?",visible:R,onOk:function(){return e=B.id,console.log("productDeleted.id",B.id),Q({variables:{id:String(e)}}).then((function(e){return console.log("deleteProduct response:",e)})),void D(!1);var e},onCancel:function(){D(!1)}},r.a.createElement("p",null,B.name)),r.a.createElement(v.a,{footer:!1,title:"Restore in category?",visible:q,onCancel:function(){n(),x(!1)}},r.a.createElement(K.a,{name:"restore",onFinish:function(e){console.log("Received values of form:",j);var t=e.categoryId,n=l.name,a=l.images,r=l.price,i=l.icon,c=String(l.id);console.log("onFinish",e),V({variables:{id:c,name:n,price:r,categoryId:t,images:a,icon:i}}).then((function(e){console.log("updateProductMESSAGE:",e)})).catch((function(e){return console.log("updateProductERROR:",e)})),x(!1)}},r.a.createElement(K.a.Item,{label:"Category",name:"categoryId",onChange:function(e){var t=e.target,n=t.name,a=t.value;A(Object(F.a)({},j,Object(L.a)({},n,a)))},rules:[{required:!0,message:"Category is required"}]},r.a.createElement(be.a,{placeholder:"Select category"},null===J||void 0===J?void 0:J.map((function(e){return r.a.createElement(be.a.Option,{key:null===e||void 0===e?void 0:e.id},null===e||void 0===e?void 0:e.name)})))),r.a.createElement(g.a,{type:"primary",htmlType:"submit"},"Restore"))))})),Ne=n(404);function Le(){var e=Object(h.a)(["\n    mutation ClearRecycleBin {\n  clearRecycleBin {\n    __typename\n  }\n}\n    "]);return Le=function(){return e},e}var Fe=O()(Le());var Ue=function(){var e,t=Object(a.useState)(!1),n=Object(E.a)(t,2),i=n[0],l=n[1],c=(e={refetchQueries:[{query:fe,variables:{categoryId:S}}]},I.b(Fe,e)),o=Object(E.a)(c,1)[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{style:{display:"inline-block"}},"Recycle bin"),r.a.createElement(m.a,{title:"Delete all products from recycle bin forever"},r.a.createElement(g.a,{style:{float:"right"},onClick:function(){l(!0)},type:"dashed",danger:!0,icon:r.a.createElement(Ne.a,null)},"Clear recycle bin")),r.a.createElement(v.a,{title:"Clear recycle bin?",visible:Boolean(i),onOk:function(){o().then(),l(!1)},onCancel:function(){l(!1)}},r.a.createElement(Ne.a,null),"..."),r.a.createElement(Be,null))};function Ge(){var e=Object(h.a)(["\n    query CategoryById($id: ID) {\n  categoryById(id: $id) {\n    id\n    name\n    icons\n    images\n  }\n}\n    "]);return Ge=function(){return e},e}var Qe=O()(Ge());var We=u.a.TabPane;function Ye(e){console.log(e)}var Ke=function(){var e,t=P(),n=t.loading,a=t.error,i=t.data,l=Y(),c=l.loading,o=l.error,d=l.data,m=ve({variables:{categoryId:S}}),g=m.loading,p=m.error,y=m.data,E=ve({variables:{categoryId:S}}),f=E.loading,v=E.error,h=E.data,b=(e={variables:{id:S}},I.c(Qe,e)),O=b.loading,C=b.error,j=b.data;if(n||c||f||g||O)return r.a.createElement("div",null,"Loading...");if(a||o||p||v||C||!i||!d||!h||!j||!y)return r.a.createElement("div",null,"Error.");var A=h.productsByCategoryId,_=j.categoryById;return r.a.createElement(u.a,{defaultActiveKey:"1",onChange:Ye},r.a.createElement(u.a.TabPane,{tab:"Products",key:"1"},r.a.createElement(ke,null)),r.a.createElement(We,{tab:"Categories",key:"2"},r.a.createElement(ce,null)),r.a.createElement(We,{tab:r.a.createElement("span",null,r.a.createElement(Re,{categoryById:_,productsByCategoryId:A}),"Recycle bin"),key:"3"},0===(null===A||void 0===A?void 0:A.length)?r.a.createElement(s.a,null):r.a.createElement(Ue,null)))},Ve=(n(390),n(391),function(){return console.log("app.tsx"),r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("p",null,r.a.createElement("code",null,"APP")),r.a.createElement("a",{className:"App-link",href:"https://glacial-mesa-30936.herokuapp.com/graphql",target:"_blank",rel:"noopener noreferrer"},"BASE_URL")),r.a.createElement(Ke,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ze=new(n(70).a),Je=new De.a({cache:ze,uri:"https://glacial-mesa-30936.herokuapp.com/graphql"}),He=n(61),Xe={isOpen:!1},Ze={isOpen:!1},et={isOpen:!1},tt={isOpen:!1},nt={product:{}},at={category:{}},rt=Object(He.combineReducers)({add_cat_modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS_OPEN_ADD_CATEGORY_MODAL":return Object(F.a)({},e,{isOpen:t.payload});default:return e}},edit_cat_modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS_OPEN_EDIT_CATEGORY_MODAL":return Object(F.a)({},e,{isOpen:t.payload});default:return e}},edit_product_modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS_OPEN_EDIT_PRODUCT_MODAL":return Object(F.a)({},e,{isOpen:t.payload});default:return e}},add_product_modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS_OPEN_ADD_PRODUCT_MODAL":return Object(F.a)({},e,{isOpen:t.payload});default:return e}},edit_product:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"EDIT_PRODUCT":return Object(F.a)({},e,{product:t.payload});case"CLEAR_EDIT_PRODUCT":return Object(F.a)({},nt);default:return e}},edit_category:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"EDIT_CATEGORY":return Object(F.a)({},e,{category:t.payload});case"CLEAR_EDIT_CATEGORY":return Object(F.a)({},at);default:return e}}}),it=n(199),lt=Object(it.composeWithDevTools)(),ct=Object(He.createStore)(rt,{},lt);l.a.render(r.a.createElement(c.a,{store:ct},r.a.createElement(o.a,{client:Je},r.a.createElement(d.a,{client:Je},r.a.createElement(Ve,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[204,1,2]]]);
//# sourceMappingURL=main.1615643a.chunk.js.map