(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{199:function(e,t,n){e.exports=n(386)},208:function(e,t,n){},385:function(e,t,n){},386:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),l=n.n(c),i=n(54),o=n(24),d=(n(208),n(391)),u=n(195),m=n(32),s=n(394),p=n(48),g=n(389),E=n(57),f=n(39);function b(){var e=Object(E.a)(["\n    {\n        categoriesAll{\n            id,\n            name,\n            icons\n        }\n    }\n"]);return b=function(){return e},e}var h=Object(f.b)(b()),O={width:"20px",height:"100%",marginRight:"10px"},y=function(){var e=Object(p.b)(h),t=e.loading,n=(e.error,e.data);if(t)return r.a.createElement("p",null,"Loading ... ");var a=n.categoriesAll;console.log(a);var c=[{title:"Name",dataIndex:"name",key:"name"},{title:"ID",dataIndex:"id",key:"id"},{title:"Icons",dataIndex:"icons",key:"icons",render:function(e){return 0!==e.length?r.a.createElement("div",null,e.map((function(e){return r.a.createElement("img",{key:e,alt:"img",src:e,style:O})}))):r.a.createElement("span",null,"no icons")}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{dataSource:a,columns:c,rowKey:"id"}))},v=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Categories"),r.a.createElement(y,null),r.a.createElement(u.a,{title:"Add Category"},r.a.createElement(m.a,{type:"dashed",shape:"circle",style:{position:"fixed",bottom:"50px",right:"50px",color:"#08c"}},r.a.createElement(s.a,{style:{fontSize:"22px",color:"#08c"}}))))},I=n(89),j=n(30),P=n(392);function k(){var e=Object(E.a)(["\n    {\n        productsAll{\n            id,\n            name,\n            price,\n            images,\n            category{\n                id,\n                name,\n                icons\n            }\n        }\n    }\n"]);return k=function(){return e},e}var w=Object(f.b)(k());function _(){var e=Object(E.a)(["\n    mutation deleteProduct($id: ID!) {\n        deleteProduct(id: $id){\n            id\n        }\n    }\n"]);return _=function(){return e},e}function C(){var e=Object(E.a)(["\n    mutation updateProduct($id: ID!, $name: String!, $price: Int!, $categoryId: ID!, $images: [String] ) {\n        updateProduct(id: $id, name: $name, price: $price, categoryId: $categoryId, images: $images ){\n            id\n            name\n            price\n            category{\n                id\n                name\n            }\n        }\n    }\n"]);return C=function(){return e},e}function x(){var e=Object(E.a)(["\n    mutation addProduct($name: String!, $price: Int!, $categoryId: ID!, $images: [String] ) {\n        addProduct(name: $name, price: $price, categoryId: $categoryId, images: $images ){\n            name\n        }\n    }\n"]);return x=function(){return e},e}var S=Object(f.b)(x()),$=Object(f.b)(C()),R=Object(f.b)(_()),D=function(e){return{type:"EDIT_PRODUCT",payload:e}},A=function(e){return{type:"IS_OPEN_MODAL",payload:e}},N={width:"50px",height:"100%",marginRight:"10px"},M={width:"20px",height:"100%",marginRight:"10px"},T=Object(i.b)(null,{setIsOpenModal:A,editProduct:D},null,{pure:!1})((function(e){var t=e.editProduct,n=e.setIsOpenModal,c=Object(p.b)(w),l=c.loading,i=(c.error,c.data),o=Object(a.useState)(!1),d=Object(j.a)(o,2),u=d[0],s=d[1],E=Object(a.useState)({}),f=Object(j.a)(E,2),b=f[0],h=f[1],O=Object(p.a)(R),y=Object(j.a)(O,2),v=y[0];if(Object(I.a)(y[1]),console.log("productDeleted",b),l)return r.a.createElement("p",null,"Loading ... ");var k=i.productsAll,_=function(e){t(k.find((function(t){return t.id===e}))),n(!0)},C=function(e){s(!0),h(k.find((function(t){return t.id===e})))},x=[{title:"Name",dataIndex:"name",key:"name"},{title:"ID",dataIndex:"id",key:"id"},{title:"Price",dataIndex:"price",key:"price"},{title:"Category",dataIndex:"category",key:"category",render:function(e){var t=e.name,n=e.icons,a=e.id;return r.a.createElement("div",null,r.a.createElement("span",null,t," "),0!==n.length?r.a.createElement("img",{key:n[0],alt:"img",src:n[0],style:M}):"",r.a.createElement("span",null," ",a))}},{title:"Images",dataIndex:"images",key:"images",render:function(e){return 0!==e.length?r.a.createElement("div",null,e.map((function(e){return r.a.createElement("img",{key:e,alt:"img",src:e,style:N})}))):r.a.createElement("span",null,"no icons")}},{title:"Actions",dataIndex:"id",key:"id",render:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{onClick:_.bind(null,e),type:"dashed"},"Edit"),r.a.createElement(m.a,{onClick:C.bind(null,e),type:"dashed",danger:!0},"Delete"))}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{dataSource:k,columns:x,rowKey:"id"}),r.a.createElement(P.a,{title:"Delete product?",visible:u,onOk:function(){console.log("productDeleted.id",b.id),v({variables:{id:b.id}}).then((function(e){return console.log("deleteProduct response:",e)})),s(!1)}.bind(null,b.id),onCancel:function(){s(!1)}},r.a.createElement("p",null,b.name)))})),F=n(20),q=n(79),L=n(390),U=n(393),B=n(91),X=n(134),K=n.n(X),V=n(191),z=n.n(V),J={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},W={wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:4}}},G=Object(i.b)((function(e){return{isOpenModal:e.modal.isOpen,edited_product:e.edit_product.product}}),{setIsOpenModal:A,editProduct:D})((function(e){var t=e.edited_product,n=e.editProduct,c=e.isOpenModal,l=e.setIsOpenModal,i=L.a.useForm(),o=Object(j.a)(i,1)[0],d=Object(p.a)(S),u=Object(j.a)(d,2),s=u[0];Object(I.a)(u[1]);var g=Object(p.a)($),E=Object(j.a)(g,2),f=E[0];Object(I.a)(E[1]);var b=Object(p.b)(h),O=(b.loading,b.error,b.data),y=Object(a.useState)({name:"",price:0,category:""}),v=Object(j.a)(y,2),k=v[0],w=v[1];Object(a.useEffect)((function(){w(t),console.log("edited_product",t)}),[t]),Object(a.useEffect)((function(){return function(){o.resetFields()}}),[]),console.log("values+++",k);var _=function(e){var t=e.target,n=t.name,a=t.value;w(Object(q.a)({},k,Object(F.a)({},n,a)))},C=O.categoriesAll,x=void 0===C?[]:C;return console.log("isOpenModal",c),r.a.createElement(P.a,{title:"Product information",visible:c,footer:!1,onCancel:function(e){console.log(e),o.resetFields(),l(!1),n({})},forceRender:!0,destroyOnClose:!1},o.setFieldsValue({name:k.name,price:k.price,images:k.images,icon:k.icon}),r.a.createElement(L.a,Object.assign({form:o,name:"product"},W,{onFinish:function(){console.log("Received values of form:",k);var e=k.id,t=k.name,n=k.category,a=k.images,r=k.icon,c=Number(k.price);console.log("onFinish",e),e?f({variables:{id:e,name:t,price:c,categoryId:n.id,images:a,icon:r}}).then((function(e){return console.log("updateProduct:",e)})).catch((function(e){return console.log("updateProductERROR:",e)})):s({variables:{name:t,price:c,categoryId:n.id,images:a,icon:r}}).then((function(e){return console.log("addProduct:",e)})).catch((function(e){return console.log("addProductERROR:",e)})),o.resetFields(),l(!1)}}),r.a.createElement(L.a.Item,{label:"Name product",name:"name",rules:[{required:!0,message:"Name product is required"}]},r.a.createElement(U.a,{onChange:_,placeholder:"name product",style:{width:"100%",marginRight:8}})),r.a.createElement(L.a.Item,{label:"Price",name:"price",rules:[{required:!0,message:"Price is required"}]},r.a.createElement(U.a,{type:"number",placeholder:"Price $",style:{width:"100%",marginRight:8}})),r.a.createElement(L.a.Item,{label:"Category",name:"categoryId",onChange:_,rules:[{required:!0,message:"Category is required"}]},r.a.createElement(B.a,{placeholder:"Select category"},x.map((function(e){return r.a.createElement(B.a.Option,{key:e.id},e.name)})))),r.a.createElement(L.a.List,{name:"images"},(function(e,t){var n=t.add,a=t.remove;return r.a.createElement("div",null,e.map((function(t,n){return r.a.createElement(L.a.Item,Object.assign({},0===n?J:W,{label:0===n?"Images":"",required:!1,key:t.key}),r.a.createElement(L.a.Item,Object.assign({},t,{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input image url or delete this field."}],noStyle:!0}),r.a.createElement(U.a,{value:k.images[n],onChange:_,placeholder:"image url",style:{width:"90%",marginRight:8}})),e.length>1?r.a.createElement(z.a,{className:"dynamic-delete-button",onClick:function(){a(t.name)}}):null)})),r.a.createElement(L.a.Item,null,r.a.createElement(m.a,{type:"dashed",onClick:function(){n()},style:{width:"80%"}},r.a.createElement(K.a,null)," Add image url")))})),r.a.createElement(L.a.Item,{label:"Icon",name:"icon"},r.a.createElement(U.a,{onChange:_,placeholder:"icon url",style:{width:"100%",marginRight:8}})),r.a.createElement(m.a,{type:"primary",htmlType:"submit"},"Submit")))})),H=Object(i.b)(null,{setIsOpenModal:A,editProduct:D},null,{pure:!1})((function(e){var t=e.setIsOpenModal;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Products"),r.a.createElement(T,null),r.a.createElement(G,null),r.a.createElement(u.a,{title:"Add Product"},r.a.createElement(m.a,{onClick:function(){D({}),t(!0)},type:"dashed",shape:"circle",style:{position:"fixed",bottom:"50px",right:"50px",color:"#08c"}},r.a.createElement(s.a,{style:{fontSize:"22px",color:"#08c"}}))))})),Q=d.a.TabPane;function Y(e){console.log(e)}var Z=function(){return r.a.createElement(d.a,{defaultActiveKey:"1",onChange:Y},r.a.createElement(Q,{tab:"Categories",key:"1"},r.a.createElement(v,null)),r.a.createElement(d.a.TabPane,{tab:"Products",key:"2"},r.a.createElement(H,null)))};n(384),n(385);var ee=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("p",null,r.a.createElement("code",null," APP")),r.a.createElement("a",{className:"App-link",href:"http://localhost:3005/graphql",target:"_blank",rel:"noopener noreferrer"},"REACT_APP_BASE_URL")),r.a.createElement(Z,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var te=new f.a({uri:"https://glacial-mesa-30936.herokuapp.com/graphql"}),ne=n(64),ae={isOpen:!1},re={product:{}},ce=Object(ne.b)({modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS_OPEN_MODAL":return Object(q.a)({},e,{isOpen:t.payload});default:return e}},edit_product:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"EDIT_PRODUCT":return Object(q.a)({},e,{product:t.payload});default:return e}}}),le=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):ne.c)(),ie=Object(ne.d)(ce,{},le);l.a.render(r.a.createElement(i.a,{store:ie},r.a.createElement(o.a,{client:te},r.a.createElement(ee,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[199,1,2]]]);
//# sourceMappingURL=main.560b6b1d.chunk.js.map