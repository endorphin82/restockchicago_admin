(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{208:function(e,t,a){e.exports=a(405)},217:function(e,t,a){},404:function(e,t,a){},405:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),l=a.n(c),o=a(39),i=a(24),d=(a(217),a(409)),u=a(203),m=a(33),s=a(412),p=a(27),g=a(407),E=a(58),b=a(42);function f(){var e=Object(E.a)(["\n    {\n        categoriesAll{\n            id,\n            name,\n            icons\n        }\n    }\n"]);return f=function(){return e},e}var h=Object(b.b)(f()),y={width:"20px",height:"100%",marginRight:"10px"},O=function(){var e=Object(p.b)(h),t=e.loading,a=(e.error,e.data);if(t)return r.a.createElement("p",null,"Loading ... ");var n=a.categoriesAll;console.log(n);var c=[{title:"Name",dataIndex:"name",key:"name"},{title:"ID",dataIndex:"id",key:"id"},{title:"Icons",dataIndex:"icons",key:"icons",render:function(e){return 0!==e.length?r.a.createElement("div",null,e.map((function(e){return r.a.createElement("img",{key:e,alt:"img",src:e,style:y})}))):r.a.createElement("span",null,"no icons")}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{dataSource:n,columns:c,rowKey:"id"}))},v=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Categories"),r.a.createElement(O,null),r.a.createElement(u.a,{title:"Add Category"},r.a.createElement(m.a,{type:"dashed",shape:"circle",style:{position:"fixed",bottom:"50px",right:"50px",color:"#08c"}},r.a.createElement(s.a,{style:{fontSize:"22px",color:"#08c"}}))))},I=a(81),P=a(26),j=a(410);function _(){var e=Object(E.a)(["\n    {\n        productsAll{\n            id,\n            name,\n            price,\n            images,\n            category{\n                id,\n                name,\n                icons\n            }\n        }\n    }\n"]);return _=function(){return e},e}var C=Object(b.b)(_());function w(){var e=Object(E.a)(["\n    mutation deleteProduct($id: ID!) {\n        deleteProduct(id: $id){\n            id\n        }\n    }\n"]);return w=function(){return e},e}function k(){var e=Object(E.a)(["\n    mutation updateProduct($id: ID!, $name: String!, $price: Int!, $categoryId: ID!, $images: [String] ) {\n        updateProduct(id: $id, name: $name, price: $price, categoryId: $categoryId, images: $images ){\n            id\n            name\n            price\n            category{\n                id\n                name\n            }\n        }\n    }\n"]);return k=function(){return e},e}function A(){var e=Object(E.a)(["\n    mutation addProduct($name: String!, $price: Int!, $categoryId: ID!, $images: [String] ) {\n        addProduct(name: $name, price: $price, categoryId: $categoryId, images: $images ){\n            name\n        }\n    }\n"]);return A=function(){return e},e}var x=Object(b.b)(A()),D=Object(b.b)(k()),S=Object(b.b)(w()),R="https://glacial-mesa-30936.herokuapp.com/graphql",$=function(e){return{type:"EDIT_PRODUCT",payload:e}},N=function(e){return{type:"IS_OPEN_EDIT_MODAL",payload:e}},M=function(e){return{type:"IS_OPEN_ADD_MODAL",payload:e}},q={width:"50px",height:"100%",marginRight:"10px"},T={width:"20px",height:"100%",marginRight:"10px"},L=Object(o.b)(null,{setIsOpenEditProductModal:N,editProduct:$},null,{pure:!1})((function(e){var t=e.editProduct,a=e.setIsOpenEditProductModal,c=Object(p.b)(C),l=c.loading,o=(c.error,c.data),i=Object(n.useState)(!1),d=Object(P.a)(i,2),u=d[0],s=d[1],E=Object(n.useState)({}),b=Object(P.a)(E,2),f=b[0],h=b[1],y=Object(p.a)(S),O=Object(P.a)(y,2),v=O[0];if(Object(I.a)(O[1]),console.log("productDeleted",f),l)return r.a.createElement("p",null,"Loading ... ");var _=o.productsAll,w=function(e){t(_.find((function(t){return t.id===e}))),a(!0)},k=function(e){s(!0),h(_.find((function(t){return t.id===e})))},A=[{title:"Name",dataIndex:"name",key:"name"},{title:"ID",dataIndex:"id",key:"id"},{title:"Price",dataIndex:"price",key:"price"},{title:"Category",dataIndex:"category",key:"category",render:function(e){var t=e.name,a=e.icons,n=e.id;return r.a.createElement("div",null,r.a.createElement("span",null,t," "),0!==a.length?r.a.createElement("img",{key:a[0],alt:"img",src:a[0],style:T}):"",r.a.createElement("span",null," ",n))}},{title:"Images",dataIndex:"images",key:"images",render:function(e){return 0!==e.length?r.a.createElement("div",null,e.map((function(e){return r.a.createElement("img",{key:e,alt:"img",src:e,style:q})}))):r.a.createElement("span",null,"no icons")}},{title:"Actions",dataIndex:"id",key:"id",render:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{onClick:w.bind(null,e),type:"dashed"},"Edit"),r.a.createElement(m.a,{onClick:k.bind(null,e),type:"dashed",danger:!0},"Delete"))}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{dataSource:_,columns:A,rowKey:"id"}),r.a.createElement(j.a,{title:"Delete product?",visible:u,onOk:function(){console.log("productDeleted.id",f.id),v({variables:{id:f.id}}).then((function(e){return console.log("deleteProduct response:",e)})),s(!1)}.bind(null,f.id),onCancel:function(){s(!1)}},r.a.createElement("p",null,f.name)))})),F=a(19),U=a(35),B=a(408),X=a(411),K=a(92),V=a(87),z=a.n(V),J=a(115),W=a.n(J),G=a(139),H=a.n(G),Q={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},Y={wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:4}}},Z=Object(o.b)((function(e){return{isOpenEditProductModal:e.edit_product_modal.isOpen,edited_product:e.edit_product.product}}),{setIsOpenEditProductModal:N,editProduct:$})((function(e){var t=e.edited_product,a=e.editProduct,c=e.isOpenEditProductModal,l=e.setIsOpenEditProductModal,o=B.a.useForm(),i=Object(P.a)(o,1)[0],d=Object(p.a)(D),u=Object(P.a)(d,2),s=u[0];Object(I.a)(u[1]);var g=Object(p.b)(h),E=(g.loading,g.error,g.data),b=Object(n.useState)({name:"",price:0,category:""}),f=Object(P.a)(b,2),y=f[0],O=f[1];Object(n.useEffect)((function(){O(t),console.log("edited_product",t)}),[t]),Object(n.useEffect)((function(){return function(){i.resetFields()}}),[]),console.log("values+++",y);var v=function(e){var t=e.target,a=t.name,n=t.value;O(Object(U.a)({},y,Object(F.a)({},a,n)))},_=E.categoriesAll,C=void 0===_?[]:_;return console.log("OpenEditProductModal",c),r.a.createElement(j.a,{title:"Product information id: ".concat(y.id),visible:c,footer:!1,onCancel:function(e){console.log(e),l(!1),a({})},forceRender:!0,destroyOnClose:!1},r.a.createElement(B.a,Object.assign({form:i,name:"product"},Y,{onFinish:function(){console.log("Received values of form:",y);var e=y.id,t=y.name,a=y.category,n=y.images,r=y.icon,c=Number(y.price);console.log("onFinish",e),s({variables:{id:e,name:t,price:c,categoryId:a.id,images:n,icon:r},update:function(e,t){var a=t.data.updateProduct,n=void 0===a?{}:a,r=n;H()({proxy:e,queriesToUpdate:[n],searchVariables:{},mutationResult:r})&&console.log("Product updated")}}).then((function(e){return console.log("updateProduct:",e)})).catch((function(e){return console.log("updateProductERROR:",e)})),l(!1)}}),r.a.createElement(B.a.Item,{label:"Name product",name:"name",rules:[{required:!0,message:"Name product is required"}]},r.a.createElement(X.a,{onChange:v,placeholder:"name product",style:{width:"100%",marginRight:8}})),r.a.createElement(B.a.Item,{label:"Price",name:"price",rules:[{required:!0,message:"Price is required"}]},r.a.createElement(X.a,{type:"number",placeholder:"Price $",style:{width:"100%",marginRight:8}})),r.a.createElement(B.a.Item,{label:"Category",name:"categoryId",onChange:v,rules:[{required:!0,message:"Category is required"}]},r.a.createElement(K.a,{placeholder:"Select category"},C.map((function(e){return r.a.createElement(K.a.Option,{key:e.id},e.name)})))),r.a.createElement(B.a.List,{name:"images"},(function(e,t){var a=t.add,n=t.remove;return r.a.createElement("div",null,e.map((function(t,a){return r.a.createElement(B.a.Item,Object.assign({},0===a?Q:Y,{label:0===a?"Images":"",required:!1,key:t.key}),r.a.createElement(B.a.Item,Object.assign({},t,{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input image url or delete this field."}],noStyle:!0}),r.a.createElement(X.a,{value:y.images[a],onChange:v,placeholder:"image url",style:{width:"90%",marginRight:8}})),e.length>1?r.a.createElement(W.a,{className:"dynamic-delete-button",onClick:function(){n(t.name)}}):null)})),r.a.createElement(B.a.Item,null,r.a.createElement(m.a,{type:"dashed",onClick:function(){a()},style:{width:"80%"}},r.a.createElement(z.a,null)," Add image url")))})),r.a.createElement(B.a.Item,{label:"Icon",name:"icon"},r.a.createElement(X.a,{onChange:v,placeholder:"icon url",style:{width:"100%",marginRight:8}})),r.a.createElement(m.a,{type:"primary",htmlType:"submit"},"Submit")))})),ee={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},te={wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:4}}},ae=Object(o.b)((function(e){return{isOpenAddProductModal:e.add_product_modal.isOpen}}),{setIsOpenAddProductModal:M})((function(e){var t=e.isOpenAddProductModal,a=e.setIsOpenAddProductModal,c=Object(p.a)(x),l=Object(P.a)(c,2),o=l[0];Object(I.a)(l[1]);var i=Object(p.b)(h),d=(i.loading,i.error,i.data),u=Object(n.useState)({}),s=Object(P.a)(u,2),g=s[0],E=s[1];console.log("values+++",g);var b=function(e){var t=e.target,a=t.name,n=t.value;console.log("target",e.target),E(Object(U.a)({},g,Object(F.a)({},a,n)))},f=d.categoriesAll,y=void 0===f?[]:f;return console.log("isOpenAddProductModal",t),r.a.createElement(j.a,{title:"Product information",visible:t,footer:!1,onCancel:function(e){e.preventDefault(),console.log(e),a(!1)}},r.a.createElement(B.a,Object.assign({name:"product"},te,{onFinish:function(e){console.log("Received values of form:",g);var t=g.name,n=(g.images,g.categoryId),r=g.icon,c=Number(g.price);console.log("onFinish"),o({variables:{name:t,price:c,categoryId:n,images:e.images,icon:r}}).then((function(e){return console.log("addProduct:",e)})).catch((function(e){return console.log("addProductERROR:",e)})),a(!1)}}),r.a.createElement(B.a.Item,{label:"Name product",rules:[{required:!0,message:"Name product is required"}]},r.a.createElement(X.a,{name:"name",onChange:b,placeholder:"name product",style:{width:"100%",marginRight:8}})),r.a.createElement(B.a.Item,{label:"Price",rules:[{required:!0,message:"Price is required"}]},r.a.createElement(X.a,{name:"price",onChange:b,type:"number",placeholder:"Price $",style:{width:"100%",marginRight:8}})),r.a.createElement(B.a.Item,{label:"Category",name:"categoryId",rules:[{required:!0,message:"Category is required"}]},r.a.createElement(K.a,{name:"categoryId",onChange:function(e){E(Object(U.a)({},g,{categoryId:e}))},placeholder:"Select category"},y.map((function(e){return r.a.createElement(K.a.Option,{key:e.id,value:e.id,onChange:b},e.name)})))),r.a.createElement(B.a.List,{name:"images"},(function(e,t){var a=t.add,n=t.remove;return r.a.createElement("div",null,e.map((function(t,a){return r.a.createElement(B.a.Item,Object.assign({},0===a?ee:te,{label:0===a?"Images":"",required:!1,key:t.key}),r.a.createElement(B.a.Item,Object.assign({},t,{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input image url or delete this field."}],noStyle:!0}),r.a.createElement(X.a,{style:{width:"90%",marginRight:8}})),e.length>1?r.a.createElement(W.a,{className:"dynamic-delete-button",onClick:function(){n(t.name)}}):null)})),r.a.createElement(B.a.Item,null,r.a.createElement(m.a,{type:"dashed",onClick:function(){a()},style:{width:"80%"}},r.a.createElement(z.a,null)," Add image url")))})),r.a.createElement(B.a.Item,{label:"Icon",name:"icon"},r.a.createElement(X.a,{onChange:b,placeholder:"icon url",style:{width:"100%",marginRight:8}})),r.a.createElement(m.a,{type:"primary",htmlType:"submit"},"Submit")))})),ne=Object(o.b)(null,{setIsOpenAddProductModal:M,editProduct:$},null,{pure:!1})((function(e){var t=e.setIsOpenAddProductModal;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Products"),r.a.createElement(L,null),r.a.createElement(Z,null),r.a.createElement(ae,null),r.a.createElement(u.a,{title:"Add Product"},r.a.createElement(m.a,{onClick:function(){$({}),t(!0)},type:"dashed",shape:"circle",style:{position:"fixed",bottom:"50px",right:"50px",color:"#08c"}},r.a.createElement(s.a,{style:{fontSize:"22px",color:"#08c"}}))))})),re=d.a.TabPane;function ce(e){console.log(e)}var le=function(){var e=Object(p.b)(h),t=e.loading,a=(e.cat_error,e.data),n=Object(p.b)(C),c=n.loading,l=(n.prod_error,n.data);if(t||c)return r.a.createElement("p",null,"Loading ... ");a.categoriesAll,l.productsAll;return r.a.createElement(d.a,{defaultActiveKey:"1",onChange:ce},r.a.createElement(d.a.TabPane,{tab:"Products",key:"1"},r.a.createElement(ne,null)),r.a.createElement(re,{tab:"Categories",key:"2"},r.a.createElement(v,null)))};a(403),a(404);var oe=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("p",null,r.a.createElement("code",null," APP")),r.a.createElement("a",{className:"App-link",href:R,target:"_blank",rel:"noopener noreferrer"},"BASE_URL")),r.a.createElement(le,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ie=new b.a({uri:R}),de=a(65),ue={isOpen:!1},me={isOpen:!1},se={product:{}},pe=Object(de.b)({edit_product_modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS_OPEN_EDIT_MODAL":return Object(U.a)({},e,{isOpen:t.payload});default:return e}},add_product_modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS_OPEN_ADD_MODAL":return Object(U.a)({},e,{isOpen:t.payload});default:return e}},edit_product:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"EDIT_PRODUCT":return Object(U.a)({},e,{product:t.payload});default:return e}}}),ge=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):de.c)(),Ee=Object(de.d)(pe,{},ge);l.a.render(r.a.createElement(o.a,{store:Ee},r.a.createElement(i.a,{client:ie},r.a.createElement(oe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[208,1,2]]]);
//# sourceMappingURL=main.04b3ff21.chunk.js.map